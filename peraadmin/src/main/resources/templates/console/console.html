<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include :: header('首页')"/>
    <link rel="stylesheet" href="/admin/css/other/console1.css"/>
</head>
<body class="pear-container">
<div>

    <div class="layui-row layui-col-space10">
        <div class="layui-col-xs6 layui-col-md3">
            <div class="layui-card top-panel">
                <div class="layui-card-header">cpu使用率</div>
                <div class=""  style="height: 90px;padding-top: 20px;">
                    <div class="layui-row layui-col-space5">
                        <div id="cpusyl" style="height: 90px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!--<div class="layui-col-xs6 layui-col-md3">-->
            <!--<div class="layui-card top-panel">-->
                <!--<div class="layui-card-header">cpu使用率</div>-->
                <!--<div class="">-->
                    <!--<div class="layui-row layui-col-space5">-->
                        <!--<button lay-event="add" >更新</button>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->

        <div class="layui-col-xs6 layui-col-md3">
            <div class="layui-card top-panel">
                <div class="layui-card-header">网站管理</div>
                <div class=""  style="height: 90px;padding-top: 20px;">
                    <div class="layui-row layui-col-space5" >
                        <form class="layui-form" action="" onsubmit="return false">
                            <div class="layui-form-item">
                                <input type="checkbox" name="is_close" lay-skin="switch" lay-filter="is_close" th:checked="${#httpServletRequest.getServletContext().getAttribute('isClose') == null || #httpServletRequest.getServletContext().getAttribute('isClose') == true}">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-col-xs6 layui-col-md6">
            <div class="layui-card top-panel">
                <div class="layui-card-header">站点详情</div>
                <div class="" style="height: 90px;padding-top: 20px;">
                    <div class="layui-row layui-col-space5">
                        <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279605055'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1279605055%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="layui-row layui-col-space10">
        <div class="layui-col-xs6 layui-col-md6">
            <div class="layui-card top-panel">
                <div class="layui-card-header">系统运行</div>
                <div class="layui-card-body">
                    <div class="layui-row layui-col-space5">
                        <div class="layui-col-xs8 layui-col-md8 " style="color: #28333E;" id="value2">
                            0
                        </div>
                        <div class="layui-col-xs4 layui-col-md4 top-panel-tips">
                            <svg t="1591462430908" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                 xmlns="http://www.w3.org/2000/svg"
                                 p-id="3170" width="200" height="200">
                                <path d="M532 784.2c0 24.4-19.8 44.3-44.3 44.3s-44.3-19.8-44.3-44.3c0-24.4 44.3-80.3 44.3-80.3s44.3 55.8 44.3 80.3zM766 784.2c0 24.4 19.8 44.3 44.3 44.3 24.4 0 44.3-19.8 44.3-44.3 0-24.4-44.3-80.3-44.3-80.3S766 759.7 766 784.2z"
                                      fill="#97DCFF" p-id="3171"></path>
                                <path d="M123.5 471.3c-9.9 0-18-8.1-18-18v-302c0-9.9 8.1-18 18-18h58c9.9 0 18 8.1 18 18v302c0 9.9-8.1 18-18 18h-58z"
                                      fill="#FCC66F" p-id="3172"></path>
                                <path d="M181.5 151.3v302h-58v-302h58m0-36h-58c-19.9 0-36 16.1-36 36v302c0 19.9 16.1 36 36 36h58c19.9 0 36-16.1 36-36v-302c0-19.8-16.1-36-36-36z"
                                      fill="#453B56" p-id="3173"></path>
                                <path d="M266.4 210.7m-18 0a18 18 0 1 0 36 0 18 18 0 1 0-36 0Z" fill="#453B56"
                                      p-id="3174"></path>
                                <path d="M430.8 641.1c-9.9 0-18-8.1-18-18v-21.6c0-130.3 106-236.3 236.3-236.3s236.3 106 236.3 236.3v21.6c0 9.9-8.1 18-18 18H430.8z"
                                      fill="#FCC66F" p-id="3175"></path>
                                <path d="M649 383.2c-5 0-10 0.2-15 0.6 113.5 7.7 203.3 102.2 203.3 217.7v21.6h30v-21.6c0-120.6-97.7-218.3-218.3-218.3z"
                                      fill="#FFD79C" p-id="3176"></path>
                                <path d="M419.6 694.4c-22.1 0-40.1-18-40.1-40.1s18-40.1 40.1-40.1h458.8c22.1 0 40.1 18 40.1 40.1s-18 40.1-40.1 40.1H419.6z"
                                      fill="#F56E73" p-id="3177"></path>
                                <path d="M878.4 632.3h-30c12.2 0 22.1 9.9 22.1 22.1s-9.9 22.1-22.1 22.1h30c12.2 0 22.1-9.9 22.1-22.1s-9.9-22.1-22.1-22.1z"
                                      fill="#FFA1A8" p-id="3178"></path>
                                <path d="M693.3 846.4c0 24.4-19.8 44.3-44.3 44.3-24.4 0-44.3-19.8-44.3-44.3s44.3-80.3 44.3-80.3 44.3 55.9 44.3 80.3z"
                                      fill="#97DCFF" p-id="3179"></path>
                                <path d="M649 908.7c-34.3 0-62.3-27.9-62.3-62.3 0-28.5 36.9-77.2 48.1-91.4 3.4-4.3 8.6-6.8 14.1-6.8s10.7 2.5 14.1 6.8c11.3 14.2 48.1 62.9 48.1 91.4 0.2 34.3-27.8 62.3-62.1 62.3z m0-112.3c-14.1 20.4-26.3 41.9-26.3 50 0 14.5 11.8 26.3 26.3 26.3s26.3-11.8 26.3-26.3c0-8.1-12.1-29.6-26.3-50z"
                                      fill="#453B56" p-id="3180"></path>
                                <path d="M903.3 601.9v-0.5c0-134.1-104.4-244.3-236.3-253.6v-30.7c0-68.7-55.9-124.6-124.6-124.6H326.5c-9.9 0-18 8.1-18 18s8.1 18 18 18h215.9c48.8 0 88.6 39.7 88.6 88.6v30.7c-131.8 9.3-236.3 119.4-236.3 253.6v0.5c-19.6 9.3-33.2 29.3-33.2 52.4 0 32 26 58.1 58.1 58.1H459c-14.8 21-33.5 51.5-33.5 71.8 0 34.3 27.9 62.3 62.3 62.3 34.3 0 62.2-27.9 62.2-62.3 0-20.3-18.6-50.7-33.5-71.8h264.9c-14.8 21-33.5 51.5-33.5 71.8 0 34.3 27.9 62.3 62.3 62.3 34.3 0 62.3-27.9 62.3-62.3 0-20.3-18.6-50.7-33.5-71.8h39.4c32 0 58.1-26 58.1-58.1 0-23.1-13.6-43-33.2-52.4zM487.8 810.4c-14.5 0-26.3-11.8-26.3-26.3 0-8.1 12.1-29.6 26.3-50 14.1 20.4 26.2 41.9 26.2 50 0 14.5-11.8 26.3-26.2 26.3z m322.5 0c-14.5 0-26.3-11.8-26.3-26.3 0-8.1 12.1-29.6 26.3-50 14.1 20.4 26.3 41.9 26.3 50-0.1 14.5-11.9 26.3-26.3 26.3zM649 383.2c118.8 0 215.4 94.9 218.1 213.1H430.9c2.8-118.1 99.3-213.1 218.1-213.1z m251.5 271.1c0 12.2-9.9 22.1-22.1 22.1H419.6c-12.2 0-22.1-9.9-22.1-22.1 0-12.2 9.9-22.1 22.1-22.1h458.8c12.2 0.1 22.1 10 22.1 22.1z"
                                      fill="#453B56" p-id="3181"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-xs6 layui-col-md6">
            <div class="layui-card top-panel">
                <div class="layui-card-header">操作系统</div>
                <div class="layui-card-body" style="font-size: 16px;">
                    <div class="layui-row layui-col-space5">
                        <div class="layui-col-xs8 layui-col-md8 " style="color: #28333E;" id="value3">
                            0
                        </div>
                        <div class="layui-col-xs4 layui-col-md4  top-panel-tips">
                            <svg t="1591462464512" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                 xmlns="http://www.w3.org/2000/svg"
                                 p-id="3311" width="200" height="200">
                                <path d="M750.4 216.5h-130v-15.3c0-32.9-26.8-59.7-59.7-59.7h-97.3c-32.9 0-59.7 26.8-59.7 59.7v15.3h-130c-30.7 0-55.6 25-55.6 55.6v72.4c0 9.9 8.1 18 18 18h31.5v478c0 23.2 18.8 42 42 42h405c23.2 0 42-18.8 42-42v-478H788c9.9 0 18-8.1 18-18v-72.4c0-30.6-25-55.6-55.6-55.6z"
                                      fill="#FCC66F" p-id="3312"></path>
                                <path d="M708.5 344.5v496c0 13.3-10.7 24-24 24h30c13.3 0 24-10.7 24-24v-496h-30z"
                                      fill="#FFD79C" p-id="3313"></path>
                                <path d="M309.5 882.5c-23.2 0-42-18.8-42-42V596c0-9.9 8.1-18 18-18h36.8c30.2 0 54.8 24.6 54.8 54.8v231.7c0 9.9-8.1 18-18 18h-49.6zM664.9 882.5c-9.9 0-18-8.1-18-18V632.8c0-30.2 24.6-54.8 54.8-54.8h36.8c9.9 0 18 8.1 18 18v244.5c0 23.2-18.8 42-42 42h-49.6z"
                                      fill="#F56E73" p-id="3314"></path>
                                <path d="M708.5 596v244.5c0 13.3-10.7 24-24 24h30c13.3 0 24-10.7 24-24V596h-30z"
                                      fill="#FFA1A8" p-id="3315"></path>
                                <path d="M475.2 882.5c-9.9 0-18-8.1-18-18V632.8c0-30.2 24.6-54.8 54.8-54.8 30.2 0 54.8 24.6 54.8 54.8v231.7c0 9.9-8.1 18-18 18h-73.6z"
                                      fill="#F56E73" p-id="3316"></path>
                                <path d="M560.7 159.5h-18c23 0 41.7 18.7 41.7 41.7V221h18v-19.8c-0.1-23-18.7-41.7-41.7-41.7zM750.4 234.5h-30c20.8 0 37.6 16.8 37.6 37.6v72.4h30v-72.4c0-20.8-16.8-37.6-37.6-37.6z"
                                      fill="#FFD79C" p-id="3317"></path>
                                <path d="M750.4 198.5H638.2c-1.4-41.6-35.6-75-77.5-75h-97.3c-41.9 0-76.1 33.4-77.5 75H273.6c-40.6 0-73.6 33-73.6 73.6v72.4c0 19.9 16.1 36 36 36h13.5v460c0 33.1 26.9 60 60 60H714.7c33.1 0 60-26.9 60-60v-460H788c19.9 0 36-16.1 36-36v-72.4c0-40.6-33-73.6-73.6-73.6z m-287.1-39h97.3c22.1 0 40.2 17.2 41.5 39H421.8c1.4-21.8 19.4-39 41.5-39z m-104.2 705h-49.6c-13.3 0-24-10.7-24-24V596h36.8c20.3 0 36.8 16.5 36.8 36.8v231.7z m189.7 0h-73.6V632.8c0-20.3 16.5-36.8 36.8-36.8 20.3 0 36.8 16.5 36.8 36.8v231.7z m189.7-24c0 13.3-10.7 24-24 24h-49.6V632.8c0-20.3 16.5-36.8 36.8-36.8h36.8v244.5z m0-280.5h-36.8c-40.1 0-72.8 32.6-72.8 72.8v231.7h-44.2V632.8c0-40.1-32.6-72.8-72.8-72.8-40.1 0-72.8 32.6-72.8 72.8v231.7h-44.2V632.8c0-40.1-32.6-72.8-72.8-72.8h-36.8v-74.5h279c9.9 0 18-8.1 18-18s-8.1-18-18-18h-279v-69h453V560zM788 344.5H236v-72.4c0-20.8 16.8-37.6 37.6-37.6h476.8c20.8 0 37.6 16.8 37.6 37.6v72.4z"
                                      fill="#453B56" p-id="3318"></path>
                                <path d="M621.8 467.5m-18 0a18 18 0 1 0 36 0 18 18 0 1 0-36 0Z" fill="#453B56"
                                      p-id="3319"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<th:block th:include="include :: footer"/>
<script>
    layui.use(['layer','form', 'echarts', 'element', 'count', 'topBar','jquery'], function () {
        let count = layui.count,
            echarts = layui.echarts;
        let form = layui.form;
        let layer = layui   .layer;
        let $ = layui.jquery;
        // count.up("value1", {
        //     time: 4000,
        //     num: 440.34,
        //     bit: 2,
        //     regulator: 50
        // })

        form.on('switch(is_close)', function(data){
            $.get("/sys/close_web",{},function( e ){
                console.log(e)
                layer.msg(e.msg)
            })
        });




        // count.up("value2", {
        //     time: 4000,
        //     num: 236.30,
        //     bit: 2,
        //     regulator: 50
        // })

        // count.up("value3", {
        //     time: 4000,
        //     num: 634.43,
        //     bit: 2,
        //     regulator: 50
        // })

        count.up("value4", {
            time: 4000,
            bit: 2,
            num: 373.23,
            regulator: 50
        })


        $.post("/console",{},function( e ){

            var cpusylBt = echarts.init(document.getElementById('cpusyl'), 'walden');
            var cpu_option = {
                series: [
                    {
                        name: 'cpu使用率',
                        type: 'pie',
                        radius: ['60%', '70%'],
                        data: [
                            {value: e.data.memoryAvailable, name: '空闲'},
                            {value: e.data.memoryTotal-e.data.memoryAvailable, name: '使用'}
                        ]
                    }
                ]
            };
            cpusylBt.setOption(cpu_option);

            document.getElementById("value2").innerHTML = e.data.runTime;
            document.getElementById("value3").innerHTML = e.data.os;

        })





        var echartsRecords = echarts.init(document.getElementById('echarts-records'), 'walden');
        var option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: [{
                type: 'category',
                data: ['2019-01', '2019-02', '2019-03', '2019-04', '2019-05', '2019-06'],
                axisLine: {
                    lineStyle: {
                        color: "#999"
                    }
                }
            }],
            yAxis: [{
                type: 'value',
                splitNumber: 4,
                splitLine: {
                    lineStyle: {
                        type: 'dashed',
                        color: '#DDD'
                    }
                },
                axisLine: {
                    show: false,
                    lineStyle: {
                        color: "#333"
                    },
                },
                nameTextStyle: {
                    color: "#999"
                },
                splitArea: {
                    show: false
                }
            }],
            series: [{
                name: '课时',
                type: 'line',
                data: [23, 60, 20, 36, 23, 85],
                lineStyle: {
                    normal: {
                        width: 8,
                        color: {
                            type: 'linear',

                            colorStops: [{
                                offset: 0,
                                color: '#A9F387' // 0% 处的颜色
                            }, {
                                offset: 1,
                                color: '#48D8BF' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        },
                        shadowColor: 'rgba(72,216,191, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    }
                },
                itemStyle: {
                    normal: {
                        color: '#fff',
                        borderWidth: 10,
                        borderColor: "#A9F387"
                    }
                },
                smooth: true
            }]
        };
        echartsRecords.setOption(option);

        window.onresize = function () {
            echartsRecords.resize();
            cpusylBt.resize();
        }

    });
</script>
</body>
</html>
